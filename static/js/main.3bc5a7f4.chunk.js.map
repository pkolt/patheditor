{"version":3,"sources":["components/PointSearch.js","components/PointListItem.js","components/PointList.js","components/Map.js","util.js","App.js","index.js"],"names":["PointSearch","props","value","onChange","onSubmit","e","preventDefault","className","type","placeholder","target","defaultProps","React","memo","title","onRemove","onClick","PointList","items","map","item","key","id","Map","mState","center","point","zoom","controls","query","ns","load","state","width","defaultGeometry","properties","balloonContentBody","searchPoint","a","async","fetch","response","json","data","geoObjects","GeoObjectCollection","featureMember","points","obj","GeoObject","Point","pos","split","parseFloat","reverse","console","error","App","useState","setItems","setValue","useCallback","filter","uuid","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.3bc5a7f4.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst PointSearch = (props) => {\n    const {value, onChange, onSubmit} = props;\n    return <form onSubmit={(e) => {\n                    e.preventDefault();\n                    onSubmit();\n                }}>\n               <input className=\"form-control\" \n                      type=\"text\" \n                      placeholder=\"Новая точка маршрута\" \n                      value={value}\n                      onChange={(e) => onChange(e.target.value)}/>\n           </form>;\n}\nPointSearch.propTypes = {\n    value: PropTypes.string,\n    onChange: PropTypes.func,\n    onSubmit: PropTypes.func,\n};\n\nPointSearch.defaultProps = {\n    value: '',\n    onChange: () => {},\n    onSubmit: () => {}\n};\n\nexport default React.memo(PointSearch);","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst PointListItem = (props) => {\n    const {title, onRemove} = props;\n    return <li className=\"list-group-item\">\n                <div className=\"d-flex w-100 justify-content-between\">\n                    <span>{title}</span>\n                    <button type=\"button\" className=\"btn btn-outline-danger btn-sm\" onClick={onRemove}>Удалить</button>\n                </div>\n            </li>;\n}\n\nPointListItem.propTypes = {\n    title: PropTypes.string.isRequired,\n    onRemove: PropTypes.func.isRequired\n};\n\nexport default React.memo(PointListItem);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport PointListItem from './PointListItem';\n\nconst PointList = (props) => {\n    const {items, onRemove} = props;\n    return <ul className=\"list-group mt-2\">\n        {items.map(\n            (item) => <PointListItem key={item.id} \n                                     title={item.title}\n                                     onRemove={() => onRemove(item.id)}/>\n        )}\n    </ul>;\n}\n\nPointList.propTypes = {\n    items: PropTypes.array,\n    onRemove: PropTypes.func\n};\n\nPointList.defaultProps = {\n    items: [],\n    onRemove: () => {}\n};\n\nexport default React.memo(PointList);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {YMaps, Map as YMap, Placemark} from 'react-yandex-maps';\n\nconst Map = (props) => {\n    const {items} = props;\n    const ymQuery = {\n        ns: 'use-load-option',\n        load: 'Map,Placemark,control.ZoomControl,geoObject.addon.balloon',\n    };\n    const moscowPoint = [55.75, 37.57];\n    const firstPoint = items[0] && items[0].point;\n    const mState = {\n        center: firstPoint || moscowPoint, \n        zoom: 10, \n        controls: ['zoomControl']\n    };\n\n    return <YMaps query={ymQuery}>\n                <YMap state={mState} width=\"\">\n                    {items.map((item) => {\n                        return <Placemark\n                                    key={item.id}\n                                    defaultGeometry={item.point}\n                                    properties={{\n                                        balloonContentBody: item.title,\n                                    }}\n                                />\n                    })}\n                </YMap>\n    </YMaps>;\n}\n\nMap.propTypes = {\n    items: PropTypes.array\n};\n\nMap.defaultProps = {\n    items: []\n};\n\nexport default React.memo(Map);","const apikey = 'b5ca0b9b-9f4b-4cbf-bcbf-f562a8297253';\n\nexport const searchPoint = async (value) => {\n    try {\n        const response = await fetch(`https://geocode-maps.yandex.ru/1.x/?apikey=${apikey}&results=1&format=json&geocode=${value}`);\n        const data = await response.json();\n        const geoObjects = data.response.GeoObjectCollection.featureMember;\n        const points = geoObjects.map((obj) => {\n          const pos = obj.GeoObject.Point.pos;\n          const geometry = pos.split(' ').map(parseFloat).reverse();\n          return geometry;\n        });\n        return points[0];\n    } catch(error) {\n        console.error(error);\n    }\n}","import React, {useState, useCallback} from 'react';\nimport uuid from 'uuid/v1';\nimport PointSearch from './components/PointSearch';\nimport PointList from './components/PointList';\nimport Map from './components/Map';\nimport {searchPoint} from './util';\n\nfunction App() {\n  const [items, setItems] = useState([]);\n  const [value, setValue] = useState('');\n\n  const onRemove = useCallback((id) => {\n    setItems(items.filter((item) => item.id !== id));\n  }, [items]);\n\n  const onChange = useCallback(setValue, [value]);\n\n  const onSubmit = useCallback(async () => {\n    if (value) {\n      const point = await searchPoint(value);\n      if (point) {\n        setItems([\n          {\n            id: uuid(),\n            title: value,\n            point\n          },\n          ...items\n        ]);\n        setValue('');\n      }\n    }\n  }, [value]);\n\n  return (\n    <div className=\"container mt-5\">\n      <div className=\"row\">\n        <div className=\"col-sm\">\n          <PointSearch value={value} onChange={onChange} onSubmit={onSubmit}/>\n          <PointList items={items} onRemove={onRemove}/>\n        </div>\n        <div className=\"col-sm\">\n          <Map items={items}/>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'whatwg-fetch';\nimport 'bootstrap/dist/css/bootstrap.css';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}